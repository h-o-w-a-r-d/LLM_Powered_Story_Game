<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chronicle: 無限世界</title>
    <link rel="stylesheet" href="static/css/terminal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="scanline"></div>
    <div id="app">
        <!-- 頂部狀態列 -->
        <div id="status-bar">
            <span id="location-display">未知領域</span>
            <span id="time-display">Day 1</span>
            <span id="health-display">HP: 100%</span>
        </div>

        <!-- 主要文字輸出區 -->
        <div id="terminal-output">
            <div class="message system">系統初始化中...</div>
            <div class="message system">連結神經網路... 完成。</div>
            <div class="message ai">歡迎來到世界構造器。請描述你想前往的世界（例如：「一個被核戰摧毀的賽博龐克廢土」或「充滿浮空島嶼的魔法世界」）。</div>
        </div>

        <!-- 隱藏的地圖除錯區 (可透過指令開啟) -->
        <div id="debug-map-container" class="hidden">
            <canvas id="mapCanvas"></canvas>
            <div id="debug-info">DEBUG MODE ACTIVE</div>
        </div>

        <!-- 輸入區 -->
        <div id="input-area">
            <span class="prompt">></span>
            <input type="text" id="user-input" placeholder="輸入指令或對話..." autocomplete="off">
            <!-- 新增 Debug 按鈕 -->
            <button id="debug-btn" title="上帝視角"><i class="fas fa-eye"></i></button>
            <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- 設定模態框 (用於輸入 API Key) -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>系統設定</h2>
            <div class="form-group">
                <label>API Key (Gemini/OpenAI):</label>
                <input type="password" id="api-key-input">
            </div>
            <div class="form-group">
                <label>API Endpoint:</label>
                <input type="text" id="api-endpoint-input" value="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent">
            </div>
            <button id="save-settings-btn">儲存並連結</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="static/js/api.js"></script>
    <script src="static/js/assets.js"></script> <!-- 加在 api.js 之後 -->
    <script src="static/js/world_data.js"></script>
    <script src="static/js/wfc.js"></script>
    <script src="static/js/agents.js"></script>
    <script src="static/js/game.js"></script>
    <script src="static/js/ui.js"></script>
</body>
</html>
